
<!DOCTYPE html>

<html>
    <head>
        <title><%= data.team.displayName %> Schedule</title>
        <link rel="stylesheet" href="/styles/team_schedule.css">
    </head>

    <body>

        <%- include ('../menu_header') %>

        <div id="headlineDiv">
            <img id="teamLogo" src="<%= data.team.logo %>">
            <h4><%= data.team.displayName %></h4>
            <h4>Team is currently in the <%= data.season.name %></h4>
        </div>

        <form id="scheduleSelection" method="GET">
            <label for="season">Select Season:</label>
             <select name="season">
                <% const startYear = (data.requestedSeason !== undefined) ? data.requestedSeason.year : data.season.year; %>
                <% for (let i = startYear; i >= 2000; i--){ %>
                    <option value="<%= i %>"><%= i %></option>
                <% } %>
             </select>
             <select name="seasonType">
                <option value="2">Regular Season</option>
                <option value="3">Post Season</option>
             </select>
             <button>Submit</button>
        </form>

        <% const checkYear = (data.requestedSeason !== undefined) ? data.requestedSeason.year : requestedSeason; %>
        <!--Check if we're requesting postseason schedule for a postseason that hasn't happened yet-->
        <% if (requestedType == 3 && (checkYear > data.season.year || data.season.type < 3)){ %>

            <h2>Postseason has not Occurred Yet. Check Back at a Later Date.</h2>

        <!--Check to see -->
        <% } else if (requestedType == 3 && data.events.length == 0) { %>

            <h2>This Team Did Not Qualify for the Postseason this Year.</h2>

        <% } else if (data.events.length == 0){ %>

            <h2>Season Schedule Not Available. Check Back Later!</h2>

        <% } else { %>

            <div class="scheduleDiv">

                <% if (league.toUpperCase() == "NFL"){ %> <!--NFL will have different schedule format-->

                    <%- include ('weeks') %>

                <% } else {  <!--for NBA, NHL and MLB schedules-->

                    if (data.requestedSeason.type == 3){ %>
                        <%- include('postseason_series') %>
                    <% } else { %>
                        <%- include ('calendar') %>
                    <% }

                } %>

            </div>
            
        <% } %>

        <%- include ('../footer') %>
    </body>
</html>